<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ˜í•™ìš©ì–´ì±Œë¦°ì§€</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: #e3f2fd;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
            position: relative;
        }
        h1 {
            color: #1565c0;
            margin-bottom: 20px;
        }
        
        button {
            background-color: #1976d2;
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
            font-weight: bold;
            margin: 5px;
        }
        button:hover {
            background-color: #0d47a1;
            transform: translateY(-2px);
        }
        
        /* ì‹¤íŒ¨ ì‹œ ì¬ë„ì „ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .retry-btn {
            background-color: #d32f2f !important;
            animation: pulse 2s infinite;
            font-size: 1.2em;
            padding: 15px 30px;
            margin-top: 20px;
        }
        .retry-btn:hover {
            background-color: #b71c1c !important;
        }

        input[type="text"] {
            width: 70%;
            padding: 12px;
            font-size: 1.1em;
            border: 2px solid #90caf9;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
        }

        #start-screen, #selection-screen {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .grade-btn {
            padding: 20px;
            font-size: 1.3em;
            width: 100%;
            background-color: #fff;
            color: #1976d2;
            border: 2px solid #1976d2;
        }
        .grade-btn:hover {
            background-color: #e3f2fd;
            color: #0d47a1;
        }
        
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 20px;
            background-color: #42a5f5;
            width: 0%;
            transition: width 0.3s;
        }
        .progress-text {
            text-align: right;
            font-size: 0.9em;
            margin-bottom: 10px;
            color: #555;
        }
        .question-box {
            font-size: 1.2em;
            margin: 20px 0;
            padding: 20px;
            background-color: #f3e5f5;
            border: 2px solid #ce93d8;
            border-radius: 8px;
            color: #4a148c;
            font-weight: bold;
            word-break: keep-all;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #result-msg {
            margin-top: 15px;
            font-weight: bold;
            min-height: 24px;
            font-size: 1.1em;
        }
        .correct { color: #2e7d32; }
        .wrong { color: #c62828; }
        
        /* ê²°ê³¼ ë°°ì§€ ìŠ¤íƒ€ì¼ */
        .master-badge {
            background-color: #ffeb3b;
            color: #f57f17;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
            display: inline-block;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border: 2px solid #fbc02d;
        }
        .fail-badge {
            background-color: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
            display: inline-block;
            margin: 20px 0;
            border: 2px solid #ef5350;
        }

        /* ì¹­ì°¬ ëª¨ë‹¬ */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 100; 
            left: 0;
            top: 0;
            width: 100%; 
            height: 100%; 
            background-color: rgba(0,0,0,0.6); 
            animation: fadeIn 0.4s;
        }
        .modal-content {
            background-color: #fff;
            margin: 30vh auto; 
            padding: 30px;
            border-radius: 15px;
            width: 80%;
            max-width: 350px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            animation: popUp 0.3s;
            border: 3px solid #42a5f5;
        }
        .modal-text {
            font-size: 1.4em;
            color: #1565c0;
            font-weight: bold;
            margin-bottom: 20px;
        }
        .emoji { font-size: 3em; display: block; margin-bottom: 10px; }
        
        .bottom-info {
            margin-top: 40px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        .player-name {
            font-size: 1.1em;
            color: #1565c0;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .footer {
            font-weight: bold;
            color: #777;
            font-size: 0.9em;
        }
        .hidden { display: none !important; }
        
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
        @keyframes popUp { from {transform: scale(0.7);} to {transform: scale(1);} }
        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);} }
    </style>
</head>
<body>

    <div class="container">
        <h1>ìˆ˜í•™ìš©ì–´ì±Œë¦°ì§€</h1>

        <!-- 1. ì‹œì‘ í™”ë©´ -->
        <div id="start-screen">
            <p>ì´ë¦„ì„ ì…ë ¥í•˜ê³  ë„ì „í•˜ì„¸ìš”.</p>
            <input type="text" id="username-input" placeholder="ì´ë¦„ ì…ë ¥" onkeyup="enterToNext()">
            <button onclick="goToSelection()">ë‹¤ìŒ ë‹¨ê³„ë¡œ</button>
        </div>

        <!-- 2. í•™ë…„ ì„ íƒ í™”ë©´ -->
        <div id="selection-screen" class="hidden">
            <p style="font-size:1.2em; font-weight:bold;">ë„ì „í•  ê³¼ì •ì„ ì„ íƒí•˜ì„¸ìš”!</p>
            <button class="grade-btn" onclick="selectGrade(1)">1í•™ë…„ ìˆ˜í•™ìš©ì–´ ë¬¸ì œ</button>
            <button class="grade-btn" onclick="selectGrade(2)">2í•™ë…„ ìˆ˜í•™ìš©ì–´ ë¬¸ì œ</button>
        </div>

        <!-- 3. í€´ì¦ˆ ì˜ì—­ -->
        <div id="quiz-area" class="hidden">
            <div class="progress-text"><span id="current-num">1</span> / 20</div>
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="question-box" id="question-text">
                ë¬¸ì œ ë¡œë”© ì¤‘...
            </div>

            <input type="text" id="answer-input" placeholder="ì •ë‹µ ì…ë ¥" onkeyup="enterKey()">
            <br>
            <button onclick="checkAnswer()">í™•ì¸</button>
            <div id="result-msg"></div>
        </div>

        <!-- 4. ìµœì¢… ê²°ê³¼ í™”ë©´ -->
        <div id="finish-area" class="hidden">
            <h2 id="final-title">ê²°ê³¼ í™•ì¸</h2>
            
            <!-- ì„±ê³µ ì‹œ í‘œì‹œ -->
            <div id="success-content" class="hidden">
                <div class="master-badge">ğŸ† <span id="master-badge-text">ìˆ˜í•™ ìš©ì–´ ë§ˆìŠ¤í„°</span></div>
                <p>ì¶•í•˜í•©ë‹ˆë‹¤! ëª¨ë“  í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í–ˆìŠµë‹ˆë‹¤.</p>
                <button onclick="location.reload()">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>

            <!-- ì‹¤íŒ¨ ì‹œ í‘œì‹œ -->
            <div id="fail-content" class="hidden">
                <div class="fail-badge">ë„ì „ ì‹¤íŒ¨... ğŸ˜­</div>
                <p id="fail-reason-text" style="font-weight:bold; color:#555; margin-top:10px;">ì˜¤ë‹µ 2íšŒ ëˆ„ì !</p>
                <p>ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë„ì „í•´ì£¼ì„¸ìš”.</p>
                <button class="retry-btn" onclick="location.reload()">ì¬ë„ì „í•˜ê¸°</button>
            </div>

            <p id="saving-text" style="color:blue; font-size:0.8em; margin-top:20px;">(ê¸°ë¡ ì €ì¥ ì¤‘...)</p>
        </div>

        <div class="bottom-info">
            <div id="player-display" class="player-name hidden">ë„ì „ì : </div>
            <div class="footer">
                ì œì‘ì : ì´ì²œì–‘ì •ì—¬ìì¤‘í•™êµ ìˆ˜í•™êµì‚¬ ë¬¸ì¬ìœ¤
            </div>
        </div>
    </div>

    <!-- ì¹­ì°¬ ëª¨ë‹¬ì°½ -->
    <div id="praise-modal" class="modal">
        <div class="modal-content">
            <span class="emoji">ğŸ‰</span>
            <div class="modal-text" id="praise-text">5ë¬¸ì œ ëŒíŒŒ!<br>ì•„ì£¼ ì˜í•˜ê³  ìˆì–´ìš”!</div>
            <button onclick="closeModal()">ê³„ì†í•˜ê¸°</button>
        </div>
    </div>

    <script>
        // ==========================================
        // 1. êµ¬ê¸€ ì•±ìŠ¤ ìŠ¤í¬ë¦½íŠ¸ URLì„ ë”°ì˜´í‘œ ì•ˆì— ë„£ìœ¼ì„¸ìš”!
        // ==========================================
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx1EPOLPtCGiwC2-Qiu9JRjM8I-i3D-t14-27FkWnKywYqHLdlvLSE9pVSgvAgQenc/exec"; 
        // ==========================================
        
        // 1í•™ë…„ ë°ì´í„°
        const dataGrade1 = [
            { term: "ì†Œìˆ˜", def: "1ê³¼ ìê¸° ìì‹ ë§Œ ì•½ìˆ˜ë¡œ ê°€ì§€ëŠ” ìˆ˜" },
            { term: "í•©ì„±ìˆ˜", def: "1ê³¼ ìê¸° ìì‹  ì´ì™¸ì˜ ì•½ìˆ˜ë¥¼ ê°€ì§€ëŠ” ìˆ˜" },
            { term: "ê±°ë“­ì œê³±", def: "ê°™ì€ ìˆ˜ë¥¼ ì—¬ëŸ¬ ë²ˆ ê³±í•œ ìˆ˜" },
            { term: "ì§€ìˆ˜", def: "ë°‘ì„ ëª‡ ë²ˆ ê³±í–ˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìˆ˜" },
            { term: "ë°‘", def: "ê±°ë“­ì œê³±ì—ì„œ ë°˜ë³µí•´ ê³±í•´ì§€ëŠ” ìˆ˜" },
            { term: "ì†Œì¸ìˆ˜", def: "ì–´ë–¤ ìˆ˜ë¥¼ ë‚˜ëˆ„ëŠ” ì†Œìˆ˜" },
            { term: "ì„œë¡œì†Œ", def: "ê³µì•½ìˆ˜ê°€ 1ë¿ì¸ ë‘ ìˆ˜" },
            { term: "ì–‘ìˆ˜", def: "0ë³´ë‹¤ í° ìˆ˜" },
            { term: "ìŒìˆ˜", def: "0ë³´ë‹¤ ì‘ì€ ìˆ˜" },
            { term: "ì–‘ì˜ ì •ìˆ˜", def: "1, 2, 3ì²˜ëŸ¼ 0ë³´ë‹¤ í° ì •ìˆ˜" },
            { term: "ìŒì˜ ì •ìˆ˜", def: "-1, -2ì²˜ëŸ¼ 0ë³´ë‹¤ ì‘ì€ ì •ìˆ˜" },
            { term: "ì •ìˆ˜", def: "ì–‘ì˜ ì •ìˆ˜, 0, ìŒì˜ ì •ìˆ˜ë¥¼ í¬í•¨í•œ ìˆ˜" },
            { term: "ìˆ˜ì§ì„ ", def: "ìˆ˜ë¥¼ ì§ì„  ìœ„ì— ìœ„ì¹˜ë¡œ ë‚˜íƒ€ë‚¸ ê²ƒ" },
            { term: "ì–‘ì˜ ìœ ë¦¬ìˆ˜", def: "0ë³´ë‹¤ í° ë¶„ìˆ˜ë‚˜ ì†Œìˆ˜" },
            { term: "ìŒì˜ ìœ ë¦¬ìˆ˜", def: "0ë³´ë‹¤ ì‘ì€ ë¶„ìˆ˜ë‚˜ ì†Œìˆ˜" },
            { term: "ìœ ë¦¬ìˆ˜", def: "ë¶„ìˆ˜ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆëŠ” ìˆ˜" },
            { term: "ì ˆëŒ“ê°’", def: "ìˆ˜ì˜ í¬ê¸°ë¥¼ ë‚˜íƒ€ë‚´ëŠ” 0ì—ì„œì˜ ê±°ë¦¬" },
            { term: "êµí™˜ë²•ì¹™", def: "ë§ì…ˆê³¼ ê³±ì…ˆì—ì„œ ìˆœì„œë¥¼ ë°”ê¿”ë„ ê²°ê³¼ê°€ ê°™ì€ ì„±ì§ˆ" },
            { term: "ê²°í•©ë²•ì¹™", def: "ë§ì…ˆê³¼ ê³±ì…ˆì—ì„œ ê´„í˜¸ì˜ ìœ„ì¹˜ë¥¼ ë°”ê¿” ê³„ì‚°í•´ë„ ê°™ì€ ì„±ì§ˆ" },
            { term: "ë¶„ë°°ë²•ì¹™", def: "ê³±ì…ˆì´ ë§ì…ˆì´ë‚˜ ëº„ì…ˆ ì•ˆìœ¼ë¡œ í¼ì§€ëŠ” ì„±ì§ˆ" },
            { term: "ì—­ìˆ˜", def: "ê³±í–ˆì„ ë•Œ 1ì´ ë˜ëŠ” ë‘ ìˆ˜ ì¤‘ í•˜ë‚˜" },
            { term: "ì–‘ì˜ ë¶€í˜¸", def: "ì–‘ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê¸°í˜¸" },
            { term: "ìŒì˜ ë¶€í˜¸", def: "ìŒìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê¸°í˜¸" },
            { term: "ëŒ€ì…", def: "ë¯¸ì§€ìˆ˜ ìë¦¬ì— ê°’ì„ ë„£ëŠ” ê²ƒ" },
            { term: "í•­", def: "ì‹ì„ ì´ë£¨ëŠ” ë”í•˜ê±°ë‚˜ ëº€ ê°ê°ì˜ ë¶€ë¶„" },
            { term: "ë‹¤í•­ì‹", def: "í•˜ë‚˜ ì´ìƒì˜ í•­ì´ ë”í•´ì§„ ì‹" },
            { term: "ë‹¨í•­ì‹", def: "í•­ì´ í•˜ë‚˜ë§Œ ìˆëŠ” ì‹" },
            { term: "ìƒìˆ˜í•­", def: "ë¬¸ìê°€ ì—†ëŠ” í•­" },
            { term: "ê³„ìˆ˜", def: "ë¬¸ì ì•ì— ê³±í•´ì§„ ìˆ˜" },
            { term: "ì°¨ìˆ˜", def: "í•­ì—ì„œ ë¬¸ìì˜ ì§€ìˆ˜ì˜ í•©" },
            { term: "ì¼ì°¨ì‹", def: "ì°¨ìˆ˜ê°€ 1ì¸ ì‹" },
            { term: "ë™ë¥˜í•­", def: "ë¬¸ìì™€ ì°¨ìˆ˜ê°€ ê°™ì€ í•­" },
            { term: "ë“±ì‹", def: "ì–‘ìª½ ê°’ì´ ê°™ì€ ìˆ˜ì‹" },
            { term: "ë°©ì •ì‹", def: "ë¯¸ì§€ìˆ˜ê°€ í¬í•¨ëœ ë“±ì‹" },
            { term: "ë¯¸ì§€ìˆ˜", def: "ê°’ì„ êµ¬í•´ì•¼ í•  ë¬¸ì" },
            { term: "í•´", def: "ë°©ì •ì‹ì„ ì°¸ì´ ë˜ê²Œ í•˜ëŠ” ê°’(ê·¼ê³¼ ê°™ì€ ë§" },
            { term: "ê·¼", def: "ë°©ì •ì‹ì„ ë§Œì¡±ì‹œí‚¤ëŠ” ìˆ˜ (í•´ì™€ ê°™ì€ ë§)" },
            { term: "í•­ë“±ì‹", def: "ì–´ë–¤ ê°’ì„ ë„£ì–´ë„ í•­ìƒ ì°¸ì´ ë˜ëŠ” ì‹" },
            { term: "ì´í•­", def: "ë“±ì‹ì˜ í•œìª½ì— ìˆëŠ” í•­ì„ ë°˜ëŒ€í¸ìœ¼ë¡œ ì˜®ê¸°ëŠ” ê²ƒ" },
            { term: "ì¼ì°¨ë°©ì •ì‹", def: "ë¯¸ì§€ìˆ˜ì˜ ì°¨ìˆ˜ê°€ 1ì¸ ë°©ì •ì‹" },
            { term: "ë³€ìˆ˜", def: "ê°’ì´ ë³€í•  ìˆ˜ ìˆëŠ” ë¬¸ì" },
            { term: "ì¢Œí‘œ", def: "ìœ„ì¹˜ë¥¼ ìˆ˜ë¡œ ë‚˜íƒ€ë‚¸ ê°’" },
            { term: "ìˆœì„œìŒ", def: "ì¢Œí‘œì—ì„œ (ê°€ë¡œ, ì„¸ë¡œ)ì²˜ëŸ¼ ìˆœì„œë¥¼ ì •í•´ í‘œí˜„í•œ ë‘ ìˆ˜" },
            { term: "xì¢Œí‘œ", def: "ì›ì ìœ¼ë¡œë¶€í„° ì˜¤ë¥¸ìª½(ë˜ëŠ” ì™¼ìª½)ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ì›€ì§ì˜€ëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìˆ˜" },
            { term: "yì¢Œí‘œ", def: "ì›ì ìœ¼ë¡œë¶€í„° ìœ„ìª½(ë˜ëŠ” ì•„ë˜ìª½)ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ì›€ì§ì˜€ëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ìˆ˜" },
            { term: "ì›ì ", def: "xì¶•ê³¼ yì¶•ì´ ë§Œë‚˜ëŠ” ì¶œë°œì  (0, 0)" },
            { term: "ì¢Œí‘œì¶•", def: "ì ì˜ ìœ„ì¹˜ë¥¼ ì •í•  ë•Œ ì“°ëŠ” ë‘ ê°œì˜ ê¸°ì¤€ì„ " },
            { term: "xì¶•", def: "ê°€ë¡œ ë°©í–¥ì˜ ìˆ˜ì§ì„ , ì™¼ìª½â†”ì˜¤ë¥¸ìª½ ë°©í–¥" },
            { term: "yì¶•", def: "ì„¸ë¡œ ë°©í–¥ì˜ ìˆ˜ì§ì„ , ì•„ë˜â†•ìœ„ìª½ ë°©í–¥" },
            { term: "ì¢Œí‘œí‰ë©´", def: "xì¶•ê³¼ yì¶•ìœ¼ë¡œ ë‚˜ë‰œ í‰ë©´ ìœ„ì˜ ê³µê°„" },
            { term: "ì œ1ì‚¬ë¶„ë©´", def: "ì¢Œí‘œí‰ë©´ì—ì„œ xì™€ yê°€ ëª¨ë‘ ì–‘ìˆ˜ì¸ ì˜ì—­ (ì˜¤ë¥¸ìª½ ìœ„)" },
            { term: "ì œ2ì‚¬ë¶„ë©´", def: "ì¢Œí‘œí‰ë©´ì—ì„œ xëŠ” ìŒìˆ˜, yëŠ” ì–‘ìˆ˜ì¸ ì˜ì—­ (ì™¼ìª½ ìœ„)" },
            { term: "ì œ3ì‚¬ë¶„ë©´", def: "ì¢Œí‘œí‰ë©´ì—ì„œ xì™€ yê°€ ëª¨ë‘ ìŒìˆ˜ì¸ ì˜ì—­ (ì™¼ìª½ ì•„ë˜)" },
            { term: "ì œ4ì‚¬ë¶„ë©´", def: "ì¢Œí‘œí‰ë©´ì—ì„œ xëŠ” ì–‘ìˆ˜, yëŠ” ìŒìˆ˜ì¸ ì˜ì—­ (ì˜¤ë¥¸ìª½ ì•„ë˜)" },
            { term: "ê·¸ë˜í”„", def: "ìˆ˜ë‚˜ ì‹ì˜ ê´€ê³„ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ ë‚˜íƒ€ë‚¸ ì„  ë˜ëŠ” ì " },
            { term: "ì •ë¹„ë¡€", def: "xì™€ yê°€ ê°™ì´ ì»¤ì§€ê±°ë‚˜ ê°™ì´ ì‘ì•„ì§€ëŠ” ì¼ì •í•œ ë¹„ìœ¨ì˜ ê´€ê³„" },
            { term: "ë°˜ë¹„ë¡€", def: "xê°€ ì»¤ì§€ë©´ yê°€ ì‘ì•„ì§€ê³ , ê³±ì€ í•­ìƒ ê°™ì€ ê´€ê³„" },
            { term: "êµì ", def: "ë‘ ë„í˜•ì´ ë§Œë‚˜ëŠ” ì " },
            { term: "êµì„ ", def: "ë‘ í‰ë©´ì´ ë§Œë‚˜ëŠ” ì„ " },
            { term: "ì¤‘ì ", def: "ì„ ë¶„ì˜ ì •ì¤‘ì•™ì— ìœ„ì¹˜í•œ ì " },
            { term: "ìˆ˜ì§ì´ë“±ë¶„ì„ ", def: "ì„ ë¶„ì˜ ì¤‘ì ì„ ìˆ˜ì§ìœ¼ë¡œ ì§€ë‚˜ëŠ” ì„ " },
            { term: "ê¼¬ì¸ ìœ„ì¹˜", def: "ë‘ ì§ì„ ì´ ë§Œë‚˜ì§€ ì•Šê³  ì„œë¡œ ë‹¤ë¥¸ í‰ë©´ì— ìˆëŠ” ìƒíƒœ" },
            { term: "êµê°", def: "ë‘ ì§ì„ ì´ ë§Œë‚  ë•Œ ìƒê¸°ëŠ” ë„¤ ê°œì˜ ê°" },
            { term: "ë§ê¼­ì§€ê°", def: "ë‘ ì§ì„ ì´ êµì°¨í•  ë•Œ ë§ˆì£¼ ë³´ëŠ” ê°" },
            { term: "ì—‡ê°", def: "í‰í–‰ì„ ê³¼ ê°€ë¡œì§€ë¥´ëŠ” ì§ì„ ì´ ë§Œë“¤ë©° ì„œë¡œ ë§ˆì£¼ë³´ì§€ ì•ŠëŠ” ìœ„ì¹˜ì˜ ê°" },
            { term: "ë™ìœ„ê°", def: "í‰í–‰ì„ ì—ì„œ ê°™ì€ ìœ„ì¹˜ì— ìˆëŠ” ê°" },
            { term: "í‰ê°", def: "ë°˜ë“¯í•˜ê²Œ í¼ì³ì§„ 180ë„ì˜ ê°" },
            { term: "ì§êµ", def: "ë‘ ì§ì„ ì´ ì„œë¡œ ìˆ˜ì§ìœ¼ë¡œ ë§Œë‚˜ëŠ” ê²ƒ" },
            { term: "ìˆ˜ì„ ì˜ ë°œ", def: "ì ì—ì„œ ìˆ˜ì§ìœ¼ë¡œ ë‚´ë¦° ìˆ˜ì„ ì´ ë‹¿ëŠ” ì§€ì " },
            { term: "ì‘ë„", def: "ëˆˆê¸ˆ ì—†ëŠ” ìì™€ ì»´í¼ìŠ¤ë¥¼ ì´ìš©í•´ ë„í˜•ì„ ê·¸ë¦¬ëŠ” ë°©ë²•" },
            { term: "ë‚´ê°", def: "ë‹¤ê°í˜• ì•ˆìª½ì— ìˆëŠ” ê°" },
            { term: "ì™¸ê°", def: "ë‹¤ê°í˜•ì˜ í•œ ë³€ì„ ì—°ì¥í–ˆì„ ë•Œ ìƒê¸°ëŠ” ë°”ê¹¥ìª½ ê°" },
            { term: "ë¶€ì±„ê¼´", def: "ì›ì—ì„œ ë‘ ë°˜ì§€ë¦„ê³¼ í˜¸ë¡œ ë‘˜ëŸ¬ì‹¸ì¸ ë¶€ë¶„" },
            { term: "ì¤‘ì‹¬ê°", def: "ì›ì˜ ì¤‘ì‹¬ì—ì„œ ì‹œì‘í•´ ë§Œë“¤ì–´ì§€ëŠ” ê°" },
            { term: "í˜¸", def: "ì› ìœ„ì˜ ë‘ ì ì„ ì‡ëŠ” ê³¡ì„  ë¶€ë¶„" },
            { term: "í˜„", def: "ì› ìœ„ ë‘ ì ì„ ê³§ê²Œ ì´ì€ ì„ ë¶„" },
            { term: "í™œê¼´", def: "ì›ì˜ ì¼ë¶€ ê³¡ì„ ê³¼ ê·¸ê²ƒì„ ì‡ëŠ” í˜„ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ë¶€ë¶„" },
            { term: "í• ì„ ", def: "ì›ê³¼ í•œ ì  ë˜ëŠ” ë‘ ì ì—ì„œ ë§Œë‚˜ëŠ” ì§ì„ " },
            { term: "ë‹¤ë©´ì²´", def: "ì—¬ëŸ¬ ê°œì˜ í‰ë©´ìœ¼ë¡œ ë‘˜ëŸ¬ì‹¸ì¸ ì…ì²´ë„í˜•" },
            { term: "ê°ë¿”ëŒ€", def: "ìœ„ìª½ì´ ì˜ë¦° ê°ë¿” ëª¨ì–‘ì˜ ì…ì²´ë„í˜•" },
            { term: "ì •ë‹¤ë©´ì²´", def: "ëª¨ë“  ë©´ì´ ê°™ì€ ì •ë‹¤ê°í˜•ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ì…ì²´ë„í˜•" },
            { term: "íšŒì „ì²´", def: "í‰ë©´ ë„í˜•ì„ í•œ ì¶•ì„ ì¤‘ì‹¬ìœ¼ë¡œ íšŒì „í•´ ìƒê¸´ ì…ì²´ë„í˜•" },
            { term: "íšŒì „ì¶•", def: "íšŒì „ì²´ë¥¼ ë§Œë“¤ ë•Œ ê¸°ì¤€ì´ ë˜ëŠ” ì¶•" },
            { term: "ì›ë¿”ëŒ€", def: "ì›ë¿”ì˜ ê¼­ì§“ì ì„ ìë¥¸ ì…ì²´ë„í˜•" },
            { term: "ë³€ëŸ‰", def: "ìë£Œë¥¼ êµ¬ì„±í•˜ëŠ” ê°ê°ì˜ ìˆ˜ì¹˜" },
            { term: "ì¤„ê¸°ì™€ ì ê·¸ë¦¼", def: "ìˆ˜ë¥¼ ì¤„ê¸°ì™€ ììœ¼ë¡œ ë‚˜ëˆ„ì–´ ë‚˜íƒ€ë‚¸ ê·¸ë˜í”„" },
            { term: "ê³„ê¸‰", def: "ìë£Œë¥¼ ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ ë‚˜ëˆˆ êµ¬ê°„" },
            { term: "ê³„ê¸‰ì˜ í¬ê¸°", def: "ê³„ê¸‰ì˜ ìƒí•œê³¼ í•˜í•œì˜ ì°¨ì´" },
            { term: "ë„ìˆ˜", def: "ê° ê³„ê¸‰ì— ì†í•˜ëŠ” ìë£Œì˜ ê°œìˆ˜" },
            { term: "ë„ìˆ˜ë¶„í¬í‘œ", def: "ê³„ê¸‰ë³„ ë„ìˆ˜ë¥¼ ì •ë¦¬í•œ í‘œ" },
            { term: "íˆìŠ¤í† ê·¸ë¨", def: "ë„ìˆ˜ë¶„í¬ë¥¼ ë§‰ëŒ€ê·¸ë˜í”„ë¡œ ë‚˜íƒ€ë‚¸ ê²ƒ" },
            { term: "ë„ìˆ˜ë¶„í¬ë‹¤ê°í˜•", def: "íˆìŠ¤í† ê·¸ë¨ì˜ ê° ì§ì‚¬ê°í˜• ìœ—ë³€ì˜ ì¤‘ì ê³¼ ì–‘ ëì˜ ë„ìˆ˜ê°€ 0ì¸ ê³„ê¸‰ì˜ ì¤‘ì ì„ ì„ ë¶„ìœ¼ë¡œ ì—°ê²°í•œ ê·¸ë˜í”„" },
            { term: "ìƒëŒ€ë„ìˆ˜", def: "ì „ì²´ì— ëŒ€í•œ ê° ê³„ê¸‰ì˜ ë„ìˆ˜ì˜ ë¹„ìœ¨" }
        ];

        // 2í•™ë…„ ë°ì´í„°
        const dataGrade2 = [
            { term: "ìœ í•œì†Œìˆ˜", def: "ì†Œìˆ˜ì  ì•„ë˜ ìë¦¿ìˆ˜ê°€ ëë‚˜ëŠ” ì†Œìˆ˜" },
            { term: "ë¬´í•œì†Œìˆ˜", def: "ì†Œìˆ˜ì  ì•„ë˜ê°€ ëì—†ì´ ê³„ì† ë˜ëŠ” ì†Œìˆ˜" },
            { term: "ìˆœí™˜ì†Œìˆ˜", def: "ì†Œìˆ˜ì  ì•„ë˜ ì¼ì •í•œ ìˆ«ìê°€ ë°˜ë³µë˜ëŠ” ì†Œìˆ˜" },
            { term: "ìˆœí™˜ë§ˆë””", def: "ìˆœí™˜ì†Œìˆ˜ì—ì„œ ë°˜ë³µë˜ëŠ” ìˆ«ì ë¶€ë¶„" },
            { term: "ì¼ì°¨ë¶€ë“±ì‹", def: "ë¯¸ì§€ìˆ˜ì˜ ì§€ìˆ˜ê°€ 1ì¸ ë¶€ë“±ì‹" },
            { term: "ì—°ë¦½ë°©ì •ì‹", def: "ì—¬ëŸ¬ ê°œì˜ ë°©ì •ì‹ì„ í•¨ê»˜ í’€ì–´ ë¯¸ì§€ìˆ˜ ê°’ì„ êµ¬í•˜ëŠ” ì‹" },
            { term: "ì¼ì°¨í•¨ìˆ˜", def: "ê·¸ë˜í”„ê°€ ì§ì„ ì¸ ì°¨ìˆ˜ê°€ 1ì¸ í•¨ìˆ˜" },
            { term: "ê¸°ìš¸ê¸°", def: "ì§ì„ ì˜ ê¸°ìš¸ì–´ì§„ ì •ë„ë¥¼ ìˆ˜ë¡œ ë‚˜íƒ€ë‚¸ ê°’" },
            { term: "xì ˆí¸", def: "ì¼ì°¨í•¨ìˆ˜ì˜ ê·¸ë˜í”„ê°€ xì¶•ê³¼ ë§Œë‚˜ëŠ” ì ì˜ xì¢Œí‘œ" },
            { term: "yì ˆí¸", def: "ì¼ì°¨í•¨ìˆ˜ì˜ ê·¸ë˜í”„ê°€ yì¶•ê³¼ ë§Œë‚˜ëŠ” ì ì˜ yì¢Œí‘œ" },
            { term: "í‰í–‰ì´ë™", def: "ë„í˜•ì´ ìœ„ì•„ë˜, ë˜ëŠ” ì¢Œìš°ë¡œ ì´ë™í•˜ëŠ” ê²ƒ" },
            { term: "ì§ì„ ì˜ ë°©ì •ì‹", def: "ì§ì„  ìœ„ì˜ ëª¨ë“  ì ì„ ë§Œì¡±ì‹œí‚¤ëŠ” ë°©ì •ì‹" },
            { term: "ì ‘ì„ ", def: "ê³¡ì„ ê³¼ í•œ ì ì—ì„œ ì ‘í•˜ëŠ” ì§ì„ " },
            { term: "ì ‘ì ", def: "ì ‘ì„ ê³¼ ê³¡ì„ ì´ ë§Œë‚˜ëŠ” í•œ ì " },
            { term: "ì™¸ì‹¬", def: "ì‚¼ê°í˜•ì˜ ì„¸ ë³€ì„ ìˆ˜ì§ì´ë“±ë¶„ì„ ì´ ë§Œë‚˜ëŠ” ì " },
            { term: "ì™¸ì ‘", def: "ë„í˜• ë°”ê¹¥ì—ì„œ ë‘˜ëŸ¬ì‹¸ë©° ì ‘í•˜ëŠ” ìƒíƒœ" },
            { term: "ì™¸ì ‘ì›", def: "ì‚¼ê°í˜•ì˜ ê¼­ì§“ì ì„ ëª¨ë‘ ì§€ë‚˜ëŠ” ì›" },
            { term: "ë‚´ì‹¬", def: "ì‚¼ê°í˜•ì˜ ì„¸ ê°ì˜ ì´ë“±ë¶„ì„ ì´ ë§Œë‚˜ëŠ” ì " },
            { term: "ë‚´ì ‘", def: "ë„í˜• ì•ˆìª½ì— ë§ë‹¿ìœ¼ë©° ë“¤ì–´ ìˆëŠ” ìƒíƒœ" },
            { term: "ë‚´ì ‘ì›", def: "ì‚¼ê°í˜•ì˜ ê° ë³€ì— ì ‘í•˜ëŠ” ì›" },
            { term: "ì¤‘ì„ ", def: "ì‚¼ê°í˜•ì—ì„œ ê¼­ì§“ì ê³¼ ê·¸ ë°˜ëŒ€í¸ ë³€ì˜(ëŒ€ë³€) ì˜ ì¤‘ì ì„ ì‡ëŠ” ì„ " },
            { term: "ë¬´ê²Œì¤‘ì‹¬", def: "ì‚¼ê°í˜•ì˜ ì„¸ ì¤‘ì„ ì´ ë§Œë‚˜ëŠ” ì " },
            { term: "ë‹®ìŒ", def: "ëª¨ì–‘ì´ ê°™ê³  í¬ê¸°ë§Œ ë‹¤ë¥¸ ë„í˜• ê´€ê³„" },
            { term: "ë‹®ìŒë¹„", def: "ë‹®ì€ ë„í˜•ì—ì„œ ëŒ€ì‘í•˜ëŠ” ê¸¸ì´ì˜ ë¹„ìœ¨" },
            { term: "í”¼íƒ€ê³ ë¼ìŠ¤ ì •ë¦¬", def: "ì§ê°ì‚¼ê°í˜•ì—ì„œ ë¹—ë³€ì˜ ì œê³±ì´ ë‹¤ë¥¸ ë‘ ë³€ì˜ ì œê³±ì˜ í•©ê³¼ ê°™ë‹¤ëŠ” ì •ë¦¬" },
            { term: "í™•ë¥ ", def: "ì–´ë–¤ ì‚¬ê±´ì´ ì¼ì–´ë‚  ê°€ëŠ¥ì„±" }
        ];

        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let currentGrade = 0; // 1 or 2
        let quizList = [];
        let currentIndex = 0;
        let wrongCount = 0;
        let totalWrongAttempts = 0;
        let currentPlayerName = "";
        let isMasterRun = true; // ë§ˆìŠ¤í„° ë„ì „ ìê²©
        const totalQuizCount = 20;

        // 1. ì´ë¦„ ì…ë ¥ -> í•™ë…„ ì„ íƒ í™”ë©´
        function goToSelection() {
            const nameInput = document.getElementById('username-input');
            currentPlayerName = nameInput.value.trim();

            if (!currentPlayerName) {
                alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('selection-screen').classList.remove('hidden');
            const playerDisplay = document.getElementById('player-display');
            playerDisplay.innerText = "ë„ì „ì : " + currentPlayerName;
            playerDisplay.classList.remove('hidden');
        }

        function enterToNext() {
            if (window.event.keyCode == 13) {
                goToSelection();
            }
        }

        // 2. í•™ë…„ ì„ íƒ -> ê²Œì„ ì‹œì‘
        function selectGrade(grade) {
            currentGrade = grade;
            let dataSource = (grade === 1) ? dataGrade1 : dataGrade2;

            const shuffled = [...dataSource].sort(() => 0.5 - Math.random());
            if (shuffled.length < totalQuizCount) {
                quizList = shuffled; 
            } else {
                quizList = shuffled.slice(0, totalQuizCount);
            }
            
            document.getElementById('selection-screen').classList.add('hidden');
            document.getElementById('quiz-area').classList.remove('hidden');
            showQuestion();
        }

        // 3. í€´ì¦ˆ ì§„í–‰
        function showQuestion() {
            if (currentIndex >= totalQuizCount) {
                endGame();
                return;
            }

            wrongCount = 0;
            document.getElementById('answer-input').value = '';
            document.getElementById('result-msg').innerHTML = '';
            document.getElementById('answer-input').focus();
            
            document.getElementById('current-num').innerText = currentIndex + 1;
            const progressPercent = ((currentIndex) / totalQuizCount) * 100;
            document.getElementById('progress-bar').style.width = progressPercent + "%";
            document.getElementById('question-text').innerText = quizList[currentIndex].def;
        }

        function checkAnswer() {
            const userInput = document.getElementById('answer-input').value.trim().replace(/\s+/g, '');
            const correctAnswer = quizList[currentIndex].term.replace(/\s+/g, '');
            const msgBox = document.getElementById('result-msg');

            if (userInput.toLowerCase() === correctAnswer.toLowerCase()) {
                msgBox.className = 'correct';
                msgBox.innerText = 'ì •ë‹µì…ë‹ˆë‹¤.';
                
                setTimeout(() => {
                    currentIndex++;
                    // ë§ˆìŠ¤í„° ë„ì „ ì¤‘ì¼ ë•Œë§Œ ì¹­ì°¬ íŒì—… ë„ì›€
                    if (isMasterRun && currentIndex > 0 && currentIndex % 5 === 0 && currentIndex < totalQuizCount) {
                        showPraiseModal();
                    } else {
                        showQuestion();
                    }
                }, 1000);

            } else {
                wrongCount++;
                totalWrongAttempts++;
                msgBox.className = 'wrong';
                
                if (wrongCount >= 2) {
                    // [ì¤‘ìš”] 2íšŒ ì˜¤ë‹µ ë°œìƒ ì‹œ ë¡œì§
                    // 1. ì •ë‹µ ê³µê°œ
                    msgBox.innerText = `ë•¡! ì •ë‹µì€ '${quizList[currentIndex].term}' ì…ë‹ˆë‹¤.`;
                    
                    // 2. ë§ˆìŠ¤í„° ì‹¤íŒ¨ í™•ì •
                    isMasterRun = false; 

                    // 3. 2ì´ˆ ë’¤ì— ì¦‰ì‹œ ê²Œì„ ì¢…ë£Œ (ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°€ì§€ ì•ŠìŒ)
                    setTimeout(() => {
                        endGame(); 
                    }, 2000);

                } else {
                    msgBox.innerText = 'ë‹¤ì‹œ í•œ ë²ˆ ìƒê°í•´ë³´ì„¸ìš”.';
                    document.getElementById('answer-input').select();
                }
            }
        }

        // ì¹­ì°¬ ëª¨ë‹¬
        function showPraiseModal() {
            const modal = document.getElementById('praise-modal');
            const praiseText = document.getElementById('praise-text');
            
            if (currentIndex === 5) {
                praiseText.innerHTML = "5ë¬¸ì œ ëŒíŒŒ!<br>ì‹œì‘ì´ ì•„ì£¼ ì¢‹ì•„ìš”!";
            } else if (currentIndex === 10) {
                praiseText.innerHTML = "10ë¬¸ì œ ëŒíŒŒ!<br>ì ˆë°˜ì´ë‚˜ ì™”ì–´ìš”!";
            } else if (currentIndex === 15) {
                praiseText.innerHTML = "15ë¬¸ì œ ëŒíŒŒ!<br>ì¡°ê¸ˆë§Œ ë” í˜ë‚´ì„¸ìš”!";
            }
            
            modal.style.display = "block";
        }

        function closeModal() {
            document.getElementById('praise-modal').style.display = "none";
            showQuestion();
        }

        function enterKey() {
            if (window.event.keyCode == 13) {
                checkAnswer();
            }
        }

        // 4. ê²Œì„ ì¢…ë£Œ
        function endGame() {
            document.getElementById('quiz-area').classList.add('hidden');
            document.getElementById('finish-area').classList.remove('hidden');
            document.getElementById('progress-bar').style.width = "100%";

            const finalTitle = document.getElementById('final-title');
            
            if (isMasterRun) {
                // ì„±ê³µ UI
                finalTitle.innerText = "ì¶•í•˜í•©ë‹ˆë‹¤!";
                finalTitle.style.color = "#1565c0";
                document.getElementById('success-content').classList.remove('hidden');
                document.getElementById('fail-content').classList.add('hidden'); // í˜¹ì‹œ ëª¨ë¥¼ ìˆ¨ê¹€
                
                const badgeText = document.getElementById('master-badge-text');
                badgeText.innerText = (currentGrade === 1) ? "ì¤‘1 ìˆ˜í•™ ìš©ì–´ ë§ˆìŠ¤í„°" : "ì¤‘2 ìˆ˜í•™ ìš©ì–´ ë§ˆìŠ¤í„°";
            } else {
                // ì‹¤íŒ¨ UI
                finalTitle.innerText = "ë„ì „ ì‹¤íŒ¨...";
                finalTitle.style.color = "#c62828";
                document.getElementById('fail-content').classList.remove('hidden');
                document.getElementById('success-content').classList.add('hidden');
                
                // ì–´ëŠ ë¬¸ì œì—ì„œ ë–¨ì–´ì¡ŒëŠ”ì§€ í‘œì‹œ
                const failReason = document.getElementById('fail-reason-text');
                failReason.innerText = `${currentIndex + 1}ë²ˆ ë¬¸ì œì—ì„œ ì˜¤ë‹µ 2íšŒë¡œ íƒˆë½!`;
            }

            // êµ¬ê¸€ ì‹œíŠ¸ë¡œ ê¸°ë¡ ì „ì†¡
            sendDataToSheet();
        }

        function sendDataToSheet() {
            if (SCRIPT_URL === "YOUR_GOOGLE_SCRIPT_URL") {
                document.getElementById('saving-text').innerText = "ìŠ¤í¬ë¦½íŠ¸ URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.";
                return;
            }

            const gradeText = currentGrade === 1 ? "1í•™ë…„" : "2í•™ë…„";
            
            let resultStatus = "";
            if (isMasterRun) {
                resultStatus = "ë§ˆìŠ¤í„° ë‹¬ì„±";
            } else {
                // ëª‡ ë²ˆ ë¬¸ì œì—ì„œ íƒˆë½í–ˆëŠ”ì§€ ê¸°ë¡ì— ë‚¨ê¹€
                resultStatus = `ë„ì „ ì‹¤íŒ¨ (${currentIndex + 1}ë²ˆ ë¬¸ì œ íƒˆë½)`;
            }
            
            // ê²°ê³¼ ë¬¸ìì—´
            const finalResult = `${resultStatus}`;

            // URLì— grade íŒŒë¼ë¯¸í„° ì¶”ê°€
            const url = `${SCRIPT_URL}?name=${encodeURIComponent(currentPlayerName)}&grade=${encodeURIComponent(gradeText)}&result=${encodeURIComponent(finalResult)}`;

            fetch(url)
                .then(response => {
                    document.getElementById('saving-text').innerText = "(ê¸°ë¡ ì €ì¥ ì™„ë£Œ!)";
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('saving-text').innerText = "(ì €ì¥ ì‹¤íŒ¨)";
                });
        }
    </script>
</body>
</html>
